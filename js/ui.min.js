(function(e){function a(){!o.started()&&u()&&(i.fadeIn().css("visibility","visible"),o.start(),counter.start(),u(!1))}function f(){arguments[0]&&n.html(arguments[0]),arguments[1]&&r.html(arguments[1])}var t,n,r,i,s,o=e.game;counterFreq=.02,counterTime=0,counter=e.repeater({delay:counterFreq},function(){n.text(counterTime.toFixed(2)),counterTime+=counterFreq});var u=function(){var e=!1;return function(n){if(n==undefined)return e;e=Boolean(n),n?t.fadeIn():t.fadeOut()}}();o.events.on("loaded.core",function(e){t=$("#thumb-button-left, #thumb-button-right"),n=$("#message"),r=$("#counter"),i=$("#beachball"),s=$(window),f("beachball madness!","Tilt your device left and right or use the ← and → keys to move the ball."),t.on("click touchup",a).attr("value","start"),s.on("keydown",function(e){switch(e.keyCode){case 37:o.started()||a(),o.pushBeachball("left");break;case 39:o.started()||a(),o.pushBeachball("right")}}),u(!0),o.events.emit("loaded.ui")}),o.events.on("not-loaded",function(e){f(e.reason),u(!1)}),o.events.on("lost",function(e){if(o.started()){o.stop(),counter.stop();var t=e.drawRatio,n=$(window).width();position=e.body.GetPosition();var r=position.x*t<n/2?0:n-$("#splash").width();f(counterTime.toFixed(2),"final time"),counterTime=0,$("#splash").css("bottom","0px").css("left",r+"px").show(100,function(){$(this).fadeOut(800),i.fadeOut(),o.resetBeachball(),u(!0)})}})})(this)
